# æ™ºè°± AI å¤§æ¨¡å‹è‡ªå®šä¹‰ ChatGLM-Java-SDK
>
> æ­¤é¡¹ç›®æ˜¯ç”± **Java** çš„ **JDK17** çš„é•¿æœŸç‰ˆæœ¬å¼€å‘
----
## âš ï¸è¯·æ³¨æ„ğŸ˜Ÿï¼åŸæœ¬ **0.0.1** çš„å·²ç»ä¸å†é€‚ç”¨äº†ï¼Œå®˜æ–¹å·²ç»å°†å…¶è°ƒç”¨çš„åœ°å€ä¿®æ”¹æ‰äº†ï¼Œæ— æ³•ä½¿ç”¨ **0.0.1**çš„ç‰ˆæœ¬ï¼Œè¯·å°½å¿«è½¬ç§»åˆ° **0.0.2** çš„ç‰ˆæœ¬ä¸Š

**Java Maven Dependency (BlueChatGLM)è°ƒç”¨**
> è¯·ä½¿ç”¨ **Java Maven** è°ƒç”¨è¿™ä¸ªåº“âœ”ï¸ï¼Œ**Java Ant** ä½¿ç”¨è¿™ä¸ªä¼¼ä¹ä¼šæŠ¥é”™âŒ

```
<dependency>
  <groupId>top.pulselink</groupId>
  <artifactId>bluechatglm</artifactId>
  <version>0.0.2</version>
</dependency>
```

## 1.ä½¿ç”¨ NTP æœåŠ¡å™¨æ—¶é—´

å®ƒé€šè¿‡äº’è”ç½‘æˆ–å±€åŸŸç½‘ä¸Šçš„æ—¶é—´æœåŠ¡å™¨æ¥æä¾›é«˜ç²¾åº¦ï¼Œé«˜å®‰å…¨çš„æ—¶é—´ä¿¡æ¯ï¼Œç¡®ä¿æ‰€æœ‰è®¾å¤‡éƒ½ä½¿ç”¨ç›¸åŒçš„æ—¶é—´æ˜¯å…³é”®çš„ã€‚è¿™é‡Œçš„åº”ç”¨æ˜¯å¯¹äº `JWT` éªŒè¯ä½¿ç”¨

```
//è·å–ç½‘ç»œæ—¶é—´åè®®æœåŠ¡å™¨ï¼ˆNTP Serverï¼‰

    protected long receiveTime() {
        long currentTime = System.currentTimeMillis(); //è·å–å½“å‰ç³»ç»Ÿçš„æ¯«ç§’çº§æ—¶é—´æˆ³ã€‚
        if (currentTime - lastUpdateTime < 60000) { //å¦‚æœæ—¶é—´å·®å°äº60ç§’ï¼Œå°±è¿”å›ä¸Šä¸€æ¬¡ä»NTPæœåŠ¡å™¨è·å–çš„æ—¶é—´
            return lastServerTime;
        } else {
            try {
                NTPUDPClient timeClient = new NTPUDPClient(); //åˆ›å»ºä¸€ä¸ªNTPUDPClientå¯¹è±¡ï¼Œç”¨äºä¸NTPæœåŠ¡å™¨é€šä¿¡ã€‚
                timeClient.setDefaultTimeout(timeout);
                InetAddress inetAddress = InetAddress.getByName(ntpServer);  é€šè¿‡æä¾›çš„ ntpServer å­—ç¬¦ä¸²æ¥è·å–NTPæœåŠ¡å™¨çš„IPåœ°å€ã€‚
                TimeInfo timeInfo = timeClient.getTime(inetAddress);  //æå–æœåŠ¡å™¨æ—¶é—´ä¿¡æ¯
                long serverTime = timeInfo.getMessage().getTransmitTimeStamp().getTime();
                lastServerTime = serverTime; //å°†æ–°è·å–çš„æœåŠ¡å™¨æ—¶é—´å­˜å‚¨åœ¨ lastServerTime å˜é‡ä¸­ï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚
                lastUpdateTime = currentTime;  //å°†å½“å‰æ—¶é—´å­˜å‚¨åœ¨ lastUpdateTime å˜é‡ä¸­ï¼Œä»¥å¤‡å°†æ¥çš„æ¯”è¾ƒã€‚
                return serverTime; //è¿”å›ä»NTPæœåŠ¡å™¨è·å–çš„æ—¶é—´
            } catch (Exception e) {
                throw new RuntimeException("Failed to fetch NTP time", e);
            }
        }
    }
```

----

## 2. æ˜“äºä½¿ç”¨çš„ SDK

**æœ¬é¡¹ç›®å”¯ä¸€ä¸€ä¸ªä¸å˜çš„é‡ï¼š`algorithm = HmacSHA256`**

### 2.1 è°ƒç”¨å¹¶ä½¿ç”¨ Maven åº“
>
> ç›¸å¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼Œä½¿ç”¨è¿™ä¸ª **SDK** çš„éš¾åº¦è¾ƒä½ğŸ¤©ã€‚ä»¥ä¸‹çš„ä¸‰ä¸ªç¤ºä¾‹æ˜¯ä½¿ç”¨ **Scanner** è¾“å…¥ä½ çš„é—®é¢˜ï¼Œæ§åˆ¶å°å°†è¾“å‡º **ChatGLM** å›ç­”ï¼š

è°ƒç”¨**SSEè¯·æ±‚**ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ `ï¼ˆæ­¤ç¤ºä¾‹å¯¹è‹±æ–‡è¾“å‡ºæ¯”è¾ƒå‹å¥½ï¼Œä¸­æ–‡è¾“å‡ºæœ‰é—®é¢˜ï¼‰`ï¼š

```
public class Main{
    public static void main(String[] args) {
        String apiKeyss = "Your_API_Key"; //æ›¿æ¢æˆè‡ªå·±çš„ API Key

        Scanner scan = new Scanner(System.in); //åˆ©ç”¨ Scanner è¾“å…¥å†…å®¹
        while (scan.hasNext()) {
             String userInput = scan.nextLine();
             ChatClient chats = new ChatClient(apiKeyss);      //åˆå§‹ ChatClient ï¼ˆå®ä¾‹åŒ–ï¼‰
             chats.SSEInvoke(userInput);                    //å°†ä½ è¾“å…¥çš„é—®é¢˜èµ‹å€¼ç»™ SSE è¯·æ±‚çš„
             System.out.println(chats.getResponseMessage()); //æ‰“å°å‡º ChatGLM çš„å›ç­”å†…å®¹
        }
    }
}
```

è°ƒç”¨**å¼‚æ­¥è¯·æ±‚**ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
public class Main{
    public static void main(String[] args) {
        String apiKeyss = "Your_API_Key"; //æ›¿æ¢æˆè‡ªå·±çš„ API Key

        Scanner scan = new Scanner(System.in); //åˆ©ç”¨ Scanner è¾“å…¥å†…å®¹
        while (scan.hasNext()) {
             String userInput = scan.nextLine();
             ChatClient chats = new ChatClient(apiKeyss);      //åˆå§‹ ChatClient ï¼ˆå®ä¾‹åŒ–ï¼‰
             chats.AsyncInvoke(userInput);                    //å°†ä½ è¾“å…¥çš„é—®é¢˜èµ‹å€¼ç»™å¼‚æ­¥è¯·æ±‚çš„
             System.out.println(chats.getResponseMessage()); //æ‰“å°å‡º ChatGLM çš„å›ç­”å†…å®¹
        }
    }
}
```

è°ƒç”¨**åŒæ­¥è¯·æ±‚**ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

```
public class Main{
    public static void main(String[] args) {
        String apiKeyss = "Your_API_Key"; //æ›¿æ¢æˆè‡ªå·±çš„ API Key

        Scanner scan = new Scanner(System.in); //åˆ©ç”¨ Scanner è¾“å…¥å†…å®¹
        while (scan.hasNext()) {
             String userInput = scan.nextLine();
             ChatClient chats = new ChatClient(apiKeyss);      //åˆå§‹ ChatClient ï¼ˆå®ä¾‹åŒ–ï¼‰
             chats.SyncInvoke(userInput);                    //å°†ä½ è¾“å…¥çš„é—®é¢˜èµ‹å€¼ç»™åŒæ­¥è¯·æ±‚çš„
             System.out.println(chats.getResponseMessage()); //æ‰“å°å‡º ChatGLM çš„å›ç­”å†…å®¹
        }
    }
}
```

### 2.2 èµ„æ·±å¼€å‘è€…ğŸ‘¨ğŸ¼â€ğŸ’»

å¯¹äºèµ„æ·±å¼€å‘è€…ï¼Œç›®å‰æ­¤ç‰ˆæœ¬åªæ˜¯åšäº†ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„å¼€å‘ï¼Œè¿˜æœ‰ `temperature` , `top_p` , `incremental` , `return_type` ç­‰å‚æ•°æ²¡æœ‰æ·»åŠ åˆ°è¿™ä¸€æ¬¡çš„å¼€å‘ã€‚åæœŸçš„è¯è¿™è¾¹ä¹Ÿä¼šè·Ÿè¿›å¼€å‘çš„è„šæ­¥ï¼Œå½“ç„¶è¿™è¾¹ä¹Ÿæ˜¯éå¸¸å¸Œæœ›å…¶ä»–å¼€å‘è€…å¯¹æœ¬é¡¹ç›®æä¾›æŠ€æœ¯æ”¯æŒï¼åœ¨è¿™é‡Œå…ˆæ„Ÿè°¢å„ä½äº†ï¼

----

## 3.é¡¹ç›®ä»‹ç»

### **CustomJWT** æ˜¯å¯¹äºè¿™ä¸ªé¡¹ç›®çš„è‡ªå®šåˆ¶è€Œå†™çš„ï¼ŒåæœŸä¼šç»§ç»­å¼€å‘ï¼Œæ‹“å±•è¿™ä¸ªé¡¹ç›®

æ ¹æ® **JWT.io** è¿™ä¸ªç½‘ç«™è¿›è¡Œäº†è§£ä»¥åŠåŸç†çš„å­¦ä¹ ï¼Œå¯¹äºè¿™ä¸ªé¡¹ç›®çš„**JWT** éªŒè¯ï¼Œ**Java**å®ç°èµ·æ¥è¿˜æ˜¯è¾ƒå®¹æ˜“å®ç°çš„ï¼Œå…¶ä¸­ä½¿ç”¨çš„éƒ¨åˆ†æ˜¯ `Base64Url` è€Œä¸æ˜¯å¸¸è§„çš„ `Base64`

**ç¼–ç  Base64Url** ä½¿ç”¨çš„ç¼–è¾‘å¦‚ä¸‹ï¼š

```
private String encodeBase64Url(byte[] data) {
        String base64url = Base64.getUrlEncoder().withoutPadding().encodeToString(data)  //å°†è¾“å…¥çš„å†…å®¹è½¬æ¢æˆ Base64Url
                .replace("+", "-")    //è¿™é‡Œçš„åŠ å·éœ€è¦æ›¿æ¢æˆ-
                .replace("/", "_");   //è¿™é‡Œçš„æ–œæ æ›¿æ¢æˆ_
        return base64url;             //è¿”å› base64url
    }
```

----
åˆ›å»º **JWT**ï¼Œå®ç° **Header** éªŒè¯ï¼š

```
protected String createJWT() {
        String encodedHeader = encodeBase64Url(header.getBytes());
        String encodedPayload = encodeBase64Url(payload.getBytes());
        String toSign = encodedHeader + "." + encodedPayload;

        byte[] signatureBytes = generateSignature(toSign, secret, algorithm);
        String calculatedSignature = encodeBase64Url(signatureBytes);
        return toSign + "." + calculatedSignature;
    }
```

----
éªŒè¯ **JWT** ç­¾åéƒ¨åˆ†æ˜¯å¦ä¸è¾“å‡ºçš„ç»“æœä¸€è‡´ï¼š

```
protected boolean verifyJWT(String jwt) {
        jwt = jwt.trim();

        String[] parts = jwt.split("\\.");
        if (parts.length != 3) {
            return false;
        }

        String encodedHeader = parts[0];
        String encodedPayload = parts[1];
        String signature = parts[2];

        String toVerify = encodedHeader + "." + encodedPayload;
        byte[] calculatedSignatureBytes = generateSignature(toVerify, secret, algorithm);
        String calculatedSignature = encodeBase64Url(calculatedSignatureBytes);

        return calculatedSignature.equals(signature);
    }
 
```

### è¯·æ±‚è°ƒç”¨ğŸŒ

åœ¨**åŒæ­¥è¯·æ±‚**å’Œ**SSEè¯·æ±‚**ä¸­ä½¿ç”¨çš„è¯·æ±‚æ–¹å¼å¦‚ä¸‹ï¼ˆåœ¨**Header**é‡Œé¢ï¼‰ï¼š

```
connection.setRequestMethod("POST");
connection.setRequestProperty("Accept", "application/json");        //åŒæ­¥è¯·æ±‚
//connection.setRequestProperty("Accept", "text/event-stream");    //SSEè¯·æ±‚
connection.setRequestProperty("Content-Type", "application/json; charset=UTF-8");
connection.setRequestProperty("Authorization", "Bearer " + token);
```

ä½¿ç”¨**gson**çš„åº“ï¼Œè®©**Payload**å†™å…¥**JSON**é‡Œé¢

```
JsonObject payloadMessage = new JsonObject();
payloadMessage.addProperty("prompt", message); //æ·»åŠ å±æ€§
```

> ä¸€èˆ¬æ¥è¯´ prompt -> message å°±å¯ä»¥äº†ï¼Œå¦‚æœæƒ³è¦æ·»åŠ å…¶ä»–éƒ¨åˆ†çš„å±æ€§è¿™é‡Œä¹Ÿå¯ä»¥æ·»åŠ ï¼Œæ¯”å¦‚æ·»åŠ å…³äº**temperature**ï¼Œ**top_p**ï¼š

```
payloadMessage.addProperty("temperature", 0.6);
payloadMessage.addProperty("top_p", 0.7);
```

#### SSE æµå¼ä¼ è¾“æ¨¡å‹ï¼ˆSSEInvokeModelï¼šç›®å‰ä¸å®Œå–„ï¼Œå­˜åœ¨ä¸€å®šçš„BUGï¼Œä¸æ¨èä½¿ç”¨ï¼‰

è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå¯¹æ¯ä¸€ **SSE æµå¼** çš„ç”Ÿæˆï¼Œä¸€èˆ¬è·å–å¾—åˆ°çš„å†…å®¹åŒ…å«`ï¼ševent`,`request_id`ä»¥åŠ`data`ã€‚å¯¹äº`add`åçš„æ•°æ®ï¼Œæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œè¿™é‡Œä½¿ç”¨é˜Ÿåˆ—çš„æ–¹æ³•æ’åºï¼š

```
//é˜Ÿåˆ—ï¼š BlockingQueue<String> resultQueue = new ArrayBlockingQueue<>(2000);
//å°†ä½ çš„'Content' æ•°æ®åŠ å…¥é˜Ÿåˆ—ï¼šresultQueue.offer(dataBuilder.toString());

/*
åˆ†å‰²ï¼ˆdataï¼šContentï¼‰
*/
            String[] pair = keyValue.split(":");
            if (pair.length == 2) {
                String key = pair[0].trim();
                String value = pair[1].trim();
                eventData.addProperty(key, value);
            }
```

å¯¹äº `meta`æ¥è¯´ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥åæœŸæ·»åŠ çš„ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```
        if (line.startsWith("data: ")) {  // (line = reader.readLine()) != null ä¼ å…¥
            String data = line.substring(6).trim();
            JsonObject eventData = parseEventData(data);

            String eventType = eventData.has("event") ? eventData.get("event").getAsString() : null;
            String eventDataString = eventData.has("data") ? eventData.get("data").getAsString() : null;

            if ("add".equals(eventType)) {          //addäº‹ä»¶
                System.out.println("Add Event: " + eventDataString);
            } else if ("error".equals(eventType) || "interrupted".equals(eventType)) {
                System.out.println("Error or Interrupted Event: " + eventDataString);
            } else if ("finish".equals(eventType)) {
                System.out.println("Finish Event: " + eventDataString);

                if (eventData.has("meta")) {        // metaæ•°æ®
                    JsonObject meta = eventData.getAsJsonObject("meta");
                    System.out.println("Meta: " + meta.toString());

                    if (meta.has("usage")) {         //ä½¿ç”¨é‡ï¼ˆTokenæ•°é‡ï¼‰çš„è¾“å‡º
                        JsonObject usage = meta.getAsJsonObject("usage");
                        System.out.println("Usage: " + usage.toString());
                        System.out.println("Prompt Tokens: " + usage.get("prompt_tokens").getAsInt());
                        System.out.println("Completion Tokens: " + usage.get("completion_tokens").getAsInt());
                        System.out.println("Total Tokens: " + usage.get("total_tokens").getAsInt());
                    }
                }
            }
        }
```

#### å¼‚æ­¥è¯·æ±‚ä¼ è¾“æ¨¡å‹ï¼ˆAsyncInvokeModelï¼šæ¨èä½¿ç”¨ï¼Œé€Ÿåº¦å¿«ï¼‰

è¿™é‡Œé‡‡ç”¨çš„æ˜¯`HTTPRequest`æ–¹æ³•ï¼Œæ¥æ¥æ”¶æ¶ˆæ¯ï¼š

```
HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create(apiUrl))
                .header("Accept", "application/json")  //è¯·æ±‚å¤´
                .header("Content-Type", "application/json;charset=UTF-8")
                .header("Authorization", "Bearer " + token)
                .POST(HttpRequest.BodyPublishers.ofString("{\"prompt\":\"" + message + "\"}"))  //Payload éƒ¨åˆ† -> å¯¹åº”ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
                .build();
```

æ•´ä½“ä½¿ç”¨çš„æ˜¯å¼‚æ­¥å‘é€ä¿¡æ¯ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å‡å°‘çº¿ç¨‹é˜»å¡ï¼Œè¿™é‡Œçš„`code`å’Œ`msg`æ˜¯è·å–é”™è¯¯æ¶ˆæ¯ã€‚å½“ä½ å¾—åˆ°ä¸€ä¸ª`request_id` çš„æ—¶å€™ï¼Œå†è¿›è¡ŒæŸ¥è¯¢

```
                    if (response.statusCode() == 200) {      //å½“å¾—åˆ°å“åº”å€¼æ˜¯ 200 çš„æ—¶å€™ï¼Œè¾“å‡ºä¸€ä¸ªå¼‚æ­¥è¯·æ±‚çš„æ¥å£ç›¸åº”å‚æ•°
                        processResponseData(response.body());
                        return CompletableFuture.completedFuture(response.body());
                    } else {

                        JsonObject errorResponse = JsonParser.parseString(response.body()).getAsJsonObject(); //ä¸æ˜¯ 200ï¼Œåˆ™æ”¾å›é”™è¯¯çš„ä¿¡æ¯
                        if (errorResponse.has("code") && errorResponse.has("msg")) {
                            int code = errorResponse.get("code").getAsInt();
                            String msg = errorResponse.get("msg").getAsString();
                            throw new RuntimeException("HTTP request failure, Code: " + code + ", Message: " + msg);
                        } else {
                            return CompletableFuture.failedFuture(new RuntimeException("HTTP request failure, Code: " + response.statusCode()));
                        }
                    }        
```

å½“ä½ å¾—åˆ°éœ€è¦çš„**Task_id**çš„æ—¶å€™ï¼Œè¿›è¡Œ**GET**è¯·æ±‚æŸ¥è¯¢(éƒ¨åˆ†ä»£ç )ï¼š

```
                .....ç•¥ .sendAsync(HttpRequest.newBuilder()
                        .uri(URI.create(checkUrl + TaskID)) //æ·»åŠ Taskidåˆ°æŸ¥è¯¢åœ°å€
                        .header("Accept", "application/json")
                        .header("Content-Type", "application/json;charset=UTF-8")
                        .header("Authorization", "Bearer " + token)
                        .GET()
                        .build(), HttpResponse.BodyHandlers.ofString())
                .thenCompose(response -> {......ç•¥
                )};
```

æœ€åé€šè¿‡**JSON**çš„æå–ï¼Œæå–ä»£ç ç¤ºä¾‹ä¸ºï¼š

```
JsonObject jsonResponse = JsonParser.parseString(responseData).getAsJsonObject();
            if (jsonResponse.has("data")) {
                JsonObject data = jsonResponse.getAsJsonObject("data");   //data é‡Œé¢è·å–
                if (data.has("choices")) {
                    JsonArray choices = data.getAsJsonArray("choices");  //choicesé‡Œé¢è·å–
                    if (!choices.isEmpty()) {
                        JsonObject choice = choices.get(0).getAsJsonObject(); //ä»ç¬¬ 0 ä¸ªå¼€å§‹
                        if (choice.has("content")) {
                            String message = choice.get("content").getAsString()
                                    .replaceAll("\"", "")
                                    .replace("\\", "")
                                    .replace("\\n\\n", "\n");
                            message = convertUnicodeEmojis(message);
                            getMessage = message;                      //èµ‹å€¼messageï¼Œæä¾›å¤–éƒ¨é“¾æ¥
                        }
                    }
                }
            }
```

#### åŒæ­¥è¯·æ±‚ä¼ è¾“æ¨¡å‹ï¼ˆInvokeModelï¼šæ¨èä½¿ç”¨ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼‰

ç›¸å¯¹äº**SSEæµå¼**æ¥è¯´ï¼Œè¿™ä¸ª**åŒæ­¥è¯·æ±‚**è¿˜ç®—ä¸é”™,è¿è¡Œçš„æ—¶å€™ä¸ä¼šå‡ºç°å­—ç¬¦ç¼ºå¤±çš„ **BUG**ï¼Œé€Ÿåº¦ç›¸æ¯”äº**å¼‚æ­¥è¯·æ±‚**ä¹Ÿä¸å·®ï¼ŒåŒæ­¥çš„ç¼ºç‚¹å°±æ˜¯è¯·æ±‚é‡è¿‡å¤§å¯èƒ½ä¼šé˜»å¡çº¿ç¨‹ï¼ˆ`å•çº¿ç¨‹`ï¼‰

è¿™é‡Œç›´æ¥è¯´æ˜å…³äºå¤„ç†ä¿¡æ¯è¿™ä¸€å—ï¼Œè¿™ä¸€å—å°±æ˜¯è§£æ**JSON**ä¹Ÿæ²¡æœ‰å…¶ä»–çš„ä¸œè¥¿äº†ï¼Œç¤ºä¾‹ä»£ç ï¼š

```
if (isJsonResponse(connection)) {
            JsonObject jsonResponse = JsonParser.parseString(responseData).getAsJsonObject();
            if (jsonResponse.has("data")) {  
                JsonObject data = jsonResponse.getAsJsonObject("data");      //data é‡Œé¢è·å–
                if (data.has("choices")) {
                    JsonArray choices = data.getAsJsonArray("choices");      //choicesé‡Œé¢è·å–
                    for (int i = 0; i < choices.size(); i++) {            //ä»ç¬¬ 0 ä¸ªå¼€å§‹
                        JsonObject choice = choices.get(i).getAsJsonObject();
                        if (choice.has("content")) {
                            String Message = choice.get("content").getAsString();    //Content å†…å®¹è·å–
                            Message = Message.replaceAll("\"", "");
                            Message = Message.replace("\\n\\n", "\n");
                            Message = Message.replace("\\", "");
                            Message = convertUnicodeEmojis(Message);  
                            contentMessage = Message;                //èµ‹å€¼messageï¼Œæä¾›å¤–éƒ¨é“¾æ¥
                        }
                    }
                }
            }
        }
```

> æ€»ä½“ä¸‹æ¥ï¼Œä»‹ç»æœ¬é¡¹ç›®ä¸‰ç§è¯·æ±‚æ–¹å¼åº”è¯¥è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œç›®å‰çš„ **BUG** ä¹Ÿåªèƒ½å°½é‡å»ä¿®ğŸ¥³ï¼Œä¹Ÿå¸Œæœ›å„è·¯å¤§ç¥çš„å¯¹è¿™ä¸ªé¡¹ç›®çš„æ”¯æ´ï¼å†æ¬¡æ„Ÿè°¢ğŸ‰ï¼
---

## 4.ç»“è¯­
>
> æ„Ÿè°¢å¤§å®¶èƒ½æ‰“å¼€æˆ‘çš„é¡¹ç›®ï¼Œè™½ç„¶æˆ‘å†™çš„ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘ä¹Ÿåœ¨åŠªåŠ›å¼€å‘è¿™ä¸ªé¡¹ç›®ï¼Œå½“ä½ é—®æˆ‘ä¸ºä»€ä¹ˆä¸ä½¿ç”¨å®˜æ–¹çš„é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘æƒ³è¯´å…¶å®è¿™ä¸ªä¹Ÿæ˜¯åœ¨æŒ‘æˆ˜è‡ªæˆ‘ï¼ˆé‡å¤é€ è½®å­ï¼‰ï¼Œå®˜æ–¹çš„å¼€å‘å›ºç„¶æ¯”æˆ‘ä¸ªäººå¼€å‘å®Œå–„è®¸å¤šï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ä¼šç»§ç»­åšæŒä¸‹å»ï¼Œå½“ä½¿ç”¨çš„æ•ˆç‡å¥½è¿‡å®˜æ–¹çš„æ—¶å€™ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªé¡¹ç›®å°±ç®—æ˜¯ä¸€ä¸ªæˆåŠŸçš„å­¦ä¹ ç»éªŒã€‚è¿™ä¸ªé¡¹ç›®æˆ‘ä¼šä¸€ç›´æ›´æ–°ä¸‹å»ã€‚åŒæ—¶ä¹Ÿå¸Œæœ›è¶Šæ¥è¶Šå¤šäººèƒ½ä¸€èµ·å‚ä¸è¿›æ¥ğŸš€ï¼Œæ„Ÿè°¢ä½ èƒ½çœ‹åˆ°æœ€åï¼ğŸ˜†ğŸ‘

----
**æœ€åçš„æœ€åæ„Ÿæ© gson çš„ jar åŒ…å¼€å‘äººå‘˜ä»¥åŠ Apache çš„ jar åŒ…å¼€å‘äººå‘˜**ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»
